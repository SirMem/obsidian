---
due: 2023-10-24 

title: ç»“æ„ä½“Struct_é‡è¿°
tags:
 
- cè¯­è¨€ é‡è¿°
---


> [!summary]+ summary
> 


# ğŸ¤”é—®é¢˜:





# ğŸ¤”ç›¸å…³è”:
[[ä½åŸŸ_å¡ç‰‡]]
[[å…±ç”¨ä½“_å¡ç‰‡]]


# ğŸ“˜è‡ªæˆ‘é‡è¿°
## æ¦‚å¿µ
ç»“æ„ä½“æ˜¯Cè¯­è¨€ä¸­ä¸€ç§ç”¨æˆ·å®šä¹‰çš„æ•°æ®ç±»å‹ï¼Œå®ƒå…è®¸å°†ä¸åŒç±»å‹çš„æ•°æ®ç»„åˆåœ¨ä¸€èµ·ï¼Œä»¥åˆ›å»ºè‡ªå®šä¹‰çš„æ•°æ®ç»“æ„ã€‚ç»“æ„ä½“çš„æ¯ä¸ªæˆå‘˜å¯ä»¥å…·æœ‰ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œè¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆè¡¨ç¤ºå’Œç»„ç»‡å¤æ‚çš„æ•°æ®ã€‚
## å®šä¹‰ç»“æ„
ç»“æ„ä½“å®šä¹‰ç”±å…³é”®å­—Â structÂ å’Œç»“æ„ä½“åç»„æˆï¼Œç»“æ„ä½“åå¯ä»¥æ ¹æ®éœ€è¦è‡ªè¡Œå®šä¹‰ã€‚struct è¯­å¥å®šä¹‰äº†ä¸€ä¸ªåŒ…å«å¤šä¸ªæˆå‘˜çš„æ–°çš„æ•°æ®ç±»å‹ï¼Œstruct åŸºæœ¬æ„æ¶è¯­å¥çš„æ ¼å¼å¦‚ä¸‹ï¼š
```
struct structure_name {
    data_type member1;
    data_type member2;
    // ...
};
```
ä¾‹å¦‚å®šä¹‰ä¸€ä¸ªç»“æ„ä½“:
```
struct Person {
    char name[50];
    int age;
    float height;
};
```
## ç»“æ„ä½“å˜é‡
åœ¨å®šä¹‰äº†ç»“æ„ä½“åï¼Œè¦ä½¿ç”¨ç»“æ„ä½“åˆ™å¿…é¡»å£°æ˜ç»“æ„å˜é‡ï¼Œå£°æ˜æ–¹æ³•å¦‚ä¸‹:
```
struct Person person1;
struct Person person2;
```
ç»“æ„ä½“å˜é‡æ˜¯ç‹¬ç«‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ç»“æ„ä½“ç±»ä¼¼ä¸€ä¸ªå‡½æ•°ï¼Œè€Œç»“æ„ä½“å˜é‡ç±»ä¼¼äºå½¢å‚ï¼Œå°†å†…å®¹ä¼ ç»™ç»“æ„ä½“ã€‚å¦‚
```
struct Point {
    int x;
    int y;
};

int main() {
    struct Point p1; // ç¬¬ä¸€ä¸ªç»“æ„ä½“å˜é‡
    p1.x = 10;
    p1.y = 20;

    struct Point p2; // ç¬¬äºŒä¸ªç»“æ„ä½“å˜é‡
    p2.x = 30;
    p2.y = 40;

    // ä¸¤ä¸ªç»“æ„ä½“å˜é‡åˆ†åˆ«å­˜å‚¨ä¸åŒçš„æ•°æ®
    printf("Point 1: (%d, %d)\n", p1.x, p1.y);
    printf("Point 2: (%d, %d)\n", p2.x, p2.y);

    return 0;
}

```
## è®¿é—®ç»“æ„ä½“æˆå‘˜
æœ‰äº†ç»“æ„ä½“å˜é‡ä¹‹åï¼Œå°±å¯ä»¥åˆ©ç”¨ç»“æ„ä½“å˜é‡å¯¹ç»“æ„ä½“å†…éƒ¨å˜é‡è¿›è¡Œè®¿é—®ï¼Œå¦‚
```
person1.age = 30;
person1.height = 175; //ç»“æ„ä½“å˜é‡ç»™ç»“æ„ä½“å†…éƒ¨èµ‹å€¼
strcpy(person1.name,"KennyS") //é€šè¿‡strcpyå‡½æ•°ç»™person1.nameèµ‹å­—ç¬¦ä¸²ç±»å‹çš„å€¼
```
## ç»“æ„ä½“åˆå§‹åŒ–
åœ¨æœ‰äº†ç»“æ„ä½“çš„åŸºæœ¬å£°æ˜åã€‚ç»“æ„ä½“å¯ä»¥åœ¨å£°æ˜æ—¶åˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥åç»­åˆå§‹åŒ–ã€‚ä¾‹å¦‚ï¼š
```
//å£°æ˜æ—¶åˆå§‹åŒ–
struct Person {
    char name[50] = "KennyS";
    int age = 29;
    float height = 170.2;
};

//åœ¨æœ‰äº†ç»“æ„åçš„åç»­åˆå§‹åŒ–
//å·²æœ‰ç»“æ„
struct Person {
    char name[50];
    int age;
    float height;
};
//è¿›è¡Œåç»­åˆå§‹åŒ–
struct Person person3 = {"Alice", 25, 160.0};
```
## ç»“æ„ä½“ä½œä¸ºå‡½æ•°å‚æ•°åŠå½¢å‚
ç»“æ„ä½“å¯ä»¥ä½œä¸ºå‡½æ•°å‚æ•°ä¼ é€’ï¼Œä»¥ä¾¿åœ¨å‡½æ•°ä¸­æ“ä½œç»“æ„ä½“æ•°æ®ã€‚
```
void printPerson(struct Person p) {
    printf("Name: %s, Age: %d, Height: %.2f\n", p.name, p.age, p.height);
}
//`void printPerson(struct Person p)` åªæ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦ä¸ºå‚æ•°å’Œå˜é‡é€‰æ‹©æ›´å…·æè¿°æ€§çš„åç§°ï¼Œä»¥ä½¿ä»£ç æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚
```

## ç»“æ„ä½“æŒ‡é’ˆ
å¯ä»¥ä½¿ç”¨æŒ‡å‘ç»“æ„ä½“çš„æŒ‡é’ˆæ¥æ“ä½œç»“æ„ä½“æ•°æ®ã€‚ä¾‹å¦‚ï¼š
```
struct Person *ptr = &person1;
ptr->age = 31;
//è®©æˆ‘ä»¬é€æ­¥è§£é‡Šå®ƒçš„å«ä¹‰
1. `struct Person *ptr`ï¼šè¿™æ˜¯ä¸€ä¸ªå£°æ˜è¯­å¥ï¼Œå®ƒå£°æ˜äº†ä¸€ä¸ªæŒ‡å‘ç»“æ„ä½“ `Person` çš„æŒ‡é’ˆå˜é‡ï¼Œå‘½åä¸º `ptr`ã€‚è¿™ä¸ªæŒ‡é’ˆå¯ä»¥ç”¨æ¥å­˜å‚¨ç»“æ„ä½“ `Person` ç±»å‹çš„å˜é‡çš„åœ°å€ã€‚
2. `&person1`ï¼š`&` æ“ä½œç¬¦ç”¨äºè·å–å˜é‡ `person1` çš„åœ°å€ã€‚åœ¨è¿™é‡Œï¼Œ`person1` åº”è¯¥æ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹çš„å˜é‡ã€‚
3. `ptr = &person1`ï¼šè¿™ä¸€è¡Œå°†æŒ‡é’ˆå˜é‡ `ptr` è®¾ç½®ä¸ºæŒ‡å‘ `person1` ç»“æ„ä½“å˜é‡çš„åœ°å€ã€‚ç°åœ¨ï¼Œ`ptr` åŒ…å«äº† `person1` çš„åœ°å€ã€‚
4. `ptr->age = 31`ï¼šè¿™ä¸€è¡Œä½¿ç”¨æŒ‡é’ˆ `ptr` æ¥è®¿é—® `person1` ç»“æ„ä½“å˜é‡çš„æˆå‘˜ `age`ï¼Œå¹¶å°†å…¶è®¾ç½®ä¸º `31`ã€‚`->` æ“ä½œç¬¦ç”¨äºé€šè¿‡æŒ‡é’ˆè®¿é—®ç»“æ„ä½“æˆå‘˜ï¼Œå› ä¸º `ptr` åŒ…å«äº†ç»“æ„ä½“çš„åœ°å€ï¼Œæ‰€ä»¥å®ƒå¯ä»¥ç”¨æ¥è®¿é—®ç»“æ„ä½“æˆå‘˜ï¼Œå°±åƒå®ƒæ˜¯ä¸€ä¸ªç»“æ„ä½“ä¸€æ ·ã€‚
5. æ€»ç»“ï¼šè¿™æ®µä»£ç çš„ç›®çš„æ˜¯å°†ä¸€ä¸ªæŒ‡å‘ `person1` ç»“æ„ä½“å˜é‡çš„æŒ‡é’ˆå‘½åä¸º `ptr`ï¼Œç„¶åä½¿ç”¨è¯¥æŒ‡é’ˆæ¥ä¿®æ”¹ `person1` ç»“æ„ä½“çš„ `age` æˆå‘˜çš„å€¼ï¼Œå°†å…¶è®¾ç½®ä¸º `31`ã€‚
```

## åµŒå¥—ç»“æ„ä½“
ç»“æ„ä½“å¯ä»¥åµŒå¥—åœ¨å…¶ä»–ç»“æ„ä½“ä¸­ï¼Œä»¥åˆ›å»ºæ›´å¤æ‚çš„æ•°æ®ç»“æ„ã€‚è¿™æ ·å¯ä»¥è¡¨ç¤ºæ›´å¤æ‚çš„å…³ç³»å’Œå±‚æ¬¡ç»“æ„ã€‚
```
struct Address {
    char street[100];
    char city[50];
    char zip[10];
};

struct Contact {
    struct Person person;
    struct Address address;
};
```
### è®¿é—®åµŒå¥—ç»“æ„ä½“
#### å¸¸è§„è®¿é—®
è¦è®¿é—®åµŒå¥—ç»“æ„ä½“å†…éƒ¨çš„å€¼ï¼Œä½ éœ€è¦ä½¿ç”¨å¤šä¸ª`.`æˆ–`->`æ“ä½œç¬¦ï¼Œæ ¹æ®ç»“æ„ä½“çš„ç±»å‹å’Œè®¿é—®è·¯å¾„æ¥è®¿é—®å†…éƒ¨æˆå‘˜ã€‚
å‡è®¾æœ‰ä»¥ä¸‹åµŒå¥—çš„ç»“æ„ä½“:
```
struct Address {
    char street[100];
    char city[50];
    char zip[10];
};

struct Contact {
    char email[100];
    struct Address address;
};
```
ç°åœ¨ï¼Œæˆ‘ä»¬å°†è®¿é—®`Contact`ç»“æ„ä½“å†…éƒ¨çš„`Address`ç»“æ„ä½“çš„`city`æˆå‘˜çš„å€¼ï¼š
```
struct Contact myContact; //å»ºç«‹ä¸€ä¸ªContactçš„å˜é‡

// è®¿é—® Contact ç»“æ„ä½“ä¸­çš„ Address ç»“æ„ä½“
strcpy(myContact.email, "example@email.com");

// è®¿é—® Address ç»“æ„ä½“å†…éƒ¨çš„ city æˆå‘˜
strcpy(myContact.address.city, "New York");
```
æˆ‘ä»¬é¦–å…ˆè®¿é—®äº†`myContact`ç»“æ„ä½“ä¸­çš„`email`æˆå‘˜ã€‚ç„¶åï¼Œä½¿ç”¨`.`æ“ä½œç¬¦ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥è®¿é—®äº†`address`ç»“æ„ä½“ï¼Œå¹¶åœ¨å…¶ä¸­ä½¿ç”¨`.`æ“ä½œç¬¦è®¿é—®äº†`city`æˆå‘˜
#### æŒ‡é’ˆè®¿é—®
å¦‚æœä½ æœ‰ä¸€ä¸ªæŒ‡å‘åµŒå¥—ç»“æ„ä½“çš„æŒ‡é’ˆï¼Œä½ å¯ä»¥ä½¿ç”¨`->`æ“ä½œç¬¦æ¥è®¿é—®æˆå‘˜,ä¾‹å¦‚ï¼š
```
struct Contact *ptr = &myContact; //åˆ›å»ºäº†ä¸€ä¸ªContactç»“æ„ç±»å‹çš„æŒ‡é’ˆï¼Œå¹¶è¢«èµ‹å€¼myContactå˜é‡åœ°å€
strcpy(ptr->address.city, "Los Angeles"); //é€šè¿‡myContactè®¿é—®address.cityï¼Œå¹¶å®Œæˆèµ‹å€¼å­—ç¬¦ä¸²
```

## sizeofæ“ä½œç¬¦
ä½¿ç”¨`sizeof`æ“ä½œç¬¦å¯ä»¥è·å–ç»“æ„ä½“çš„å¤§å°ï¼Œè¿™å¯¹äºå†…å­˜åˆ†é…å’Œå¤„ç†éå¸¸æœ‰ç”¨ã€‚
```
size_t size = sizeof(struct Person);
```

## ä½åŸŸ(bit Fields)
Cè¯­è¨€å…è®¸åœ¨ç»“æ„ä½“ä¸­å®šä¹‰ä½åŸŸï¼Œç”¨äºèŠ‚çœå†…å­˜ï¼Œå°¤å…¶åœ¨åµŒå…¥å¼ç³»ç»Ÿä¸­å¾ˆæœ‰ç”¨ã€‚
```
struct Flags {
    unsigned int flag1 : 1;
    unsigned int flag2 : 1;
    // æ›´å¤šä½åŸŸ...
};
```




# ğŸ’»ä»£ç åŒº