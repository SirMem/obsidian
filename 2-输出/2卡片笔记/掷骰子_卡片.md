---
due: "2023-10-14"
title: "æ·éª°å­_å¡ç‰‡"
tags:
  - "Cè¯­è¨€"
  - "æ‘˜å½•"
---
# ğŸ“–é•¿é’ç¬”è®°(ç®€è¦æ¦‚è¿°)



# ğŸ“˜è‡ªæˆ‘é‡è¿°
srand()æ˜¯ä¸€ä¸ªä¸ºrand()å‡½æ•°ä¼ è¾“ç§å­çš„ä¸€ä¸ªå‡½æ•°
rand()æ˜¯ä¸€èˆ¬ç”Ÿæˆ0~32767éšæœºæ•°çš„å‡½æ•°
å†…éƒ¨ä¸ºä¸€ä¸ªç§å­srand()ç»è¿‡ä¸€ä¸ªè¡¨è¾¾å¼çš„å˜åŒ–ç„¶åå°†å€¼èµ‹å€¼ç»™rand()æ‰€å¾—çš„æ•°
srand()å‡½æ•°çš„å‚æ•°å³æ˜¯ç§å­



# ğŸé‡ç‚¹æ‘˜æŠ„
æˆ‘ä»¬æƒ³è·å¾—1ï½6çš„éšæœºæ•°ã€‚ç„¶è€Œï¼Œrand()ç”Ÿæˆçš„éšæœºæ•°åœ¨0ï½RAND_MAXä¹‹é—´ã€‚ã€‚RAND_MAXè¢«å®šä¹‰åœ¨stdlib.hä¸­ï¼Œå…¶å€¼é€šå¸¸æ˜¯INT_MAX(é€šå¸¸ä¸º32767)ã€‚å› æ­¤ï¼Œéœ€è¦è¿›è¡Œä¸€äº›è°ƒæ•´ï¼Œæ–¹æ³•å¦‚ä¸‹:
1. æŠŠéšæœºæ•°æ±‚æ¨¡6ï¼Œè·å¾—çš„æ•´æ•°åœ¨0ï½5ä¹‹é—´ã€‚
2. ç»“æœåŠ 1ï¼Œæ–°å€¼åœ¨1ï½6ä¹‹é—´ã€‚
3. ä¸ºæ–¹ä¾¿ä»¥åæ‰©å±•ï¼ŒæŠŠç¬¬1æ­¥ä¸­çš„æ•°å­—6æ›¿æ¢æˆéª°å­é¢æ•°ã€‚
ä¸‹é¢çš„ä»£ç å®ç°äº†è¿™3ä¸ªæ­¥éª¤ï¼š
```
example
#include <stdlib.h> /* æä¾›rand()çš„åŸå‹ */
int rollem(int sides)
{
int roll;
roll = rand() % sides + 1;
return roll;
}
```
æˆ‘ä»¬è¿˜æƒ³ç”¨ä¸€ä¸ªå‡½æ•°æç¤ºç”¨æˆ·é€‰æ‹©ä»»æ„é¢æ•°çš„éª°å­ï¼Œå¹¶è¿”å›ç‚¹æ•°æ€»å’Œã€‚
```
coutinous
/* diceroll.c -- æ·éª°å­æ¨¡æ‹Ÿç¨‹åº */
/* ä¸ mandydice.c ä¸€èµ·ç¼–è¯‘ */
#include "diceroll.h"
#include <stdio.h>
#include <stdlib.h> /* æä¾›åº“å‡½æ•° rand()çš„åŸå‹ */
int roll_count = 0; /* å¤–éƒ¨é“¾æ¥ */
static int rollem(int sides) /* è¯¥å‡½æ•°å±äºè¯¥æ–‡ä»¶ç§æœ‰ */ //è¿”å›éšæœºæ•°1~sidesçš„å‡½æ•°
{
int roll;
roll = rand() % sides + 1; é¢æ•°éšæœºä¸º1~sides
++roll_count; /* è®¡ç®—å‡½æ•°è°ƒç”¨æ¬¡æ•° */
return roll;
}

int roll_n_dice(int dice,int sides) //åˆ¤æ–­æ‰€è¾“å…¥é¢æ˜¯å¦ç¬¦åˆå®é™…çš„å‡½æ•°ï¼Œdiceä¸ºæ·éª°å­æ¬¡æ•°
{
int d;
int total = 0;
if (sides < 2)
{
printf("Need at least 2 sides.\n");
return -2;
}
if (dice < 1)
{
printf("Need at least 1 die.\n");
return -1;
}
for (d = 0; d < dice; d++) //æ€»æ•°ä¸ºæ¯æ¬¡sidesçš„éšæœºæ•°ç›¸åŠ æ·éª°å­æ•°æ¬¡
total += rollem(sides);
return total;
}
```
å…¶ä¸­ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°å¤´æ–‡ä»¶æœ‰åŒå¼•å·å’Œå°–æ‹¬å·ã€‚åœ¨åŒå¼•å·æŒ‡ç¤ºç¼–è¯‘å™¨åœ¨æœ¬åœ°æŸ¥æ‰¾æ–‡ä»¶ï¼Œå°–æ‹¬å·æŒ‡ç¤ºåˆ°ç¼–è¯‘å™¨å­˜æ”¾æ ‡å‡†å¤´æ–‡ä»¶çš„ä½ç½®å»æŸ¥æ‰¾æ–‡ä»¶ã€‚â€œæœ¬åœ°æŸ¥æ‰¾â€çš„å«ä¹‰å–å†³äºå…·ä½“çš„å®ç°ã€‚ä¸€äº›å¸¸è§çš„å®ç°æŠŠå¤´æ–‡ä»¶ä¸æºä»£ç æ–‡ä»¶æˆ–å·¥ç¨‹æ–‡ä»¶ï¼ˆå¦‚æœç¼–è¯‘å™¨ä½¿ç”¨å®ƒä»¬çš„è¯ï¼‰æ”¾åœ¨ç›¸åŒçš„ç›®å½•æˆ–æ–‡ä»¶å¤¹ä¸­ã€‚
```
å¤šæ¬¡æ·éª°å­çš„æ¨¡æ‹Ÿç¨‹åº
/* manydice.c -- å¤šæ¬¡æ·éª°å­çš„æ¨¡æ‹Ÿç¨‹åº */
/* ä¸ diceroll.c ä¸€èµ·ç¼–è¯‘*/
#include <stdio.h>
#include <stdlib.h>
/* ä¸ºåº“å‡½æ•° srand() æä¾›åŸå‹ */
#include <time.h> /* ä¸º time() æä¾›åŸå‹*/
#include "diceroll.h" /* ä¸ºroll_n_dice()æä¾›åŸå‹ï¼Œä¸ºroll_countå˜é‡æä¾›å£°æ˜ */
int main(void)
{
int dice, roll;
int sides;
int status;
srand((unsigned int) time(0)); /* éšæœºç§å­ */
printf("Enter the number of sides per die, 0 to stop.\n");
while (scanf("%d", &sides) == 1 && sides > 0) //å¯¹é”™è¯¯çš„è¾“å…¥è¿›è¡Œåˆ¤æ–­
{
printf("How many dice?\n");
if ((status = scanf("%d", &dice)) != 1)
{
if (status == EOF) 
break;
/* é€€å‡ºå¾ªç¯ */
else
{
printf("You should have entered an integer.");
printf(" Let's begin again.\n");
while (getchar() != '\n')
continue;
/* å¤„ç†é”™è¯¯çš„è¾“å…¥ */
printf("How many sides? Enter 0 to stop.\n");
continue;
/* è¿›å…¥å¾ªç¯çš„ä¸‹ä¸€è½®è¿­ä»£ */
}
}
roll = roll_n_dice(dice, sides);
printf("You have rolled a %d using %d %d-sided dice.\n",
roll, dice, sides);
printf("How many sides? Enter 0 to stop.\n");
}
printf("The rollem() function was called %d times.\n",
roll_count);
/* ä½¿ç”¨å¤–éƒ¨å˜é‡ */
printf("GOOD FORTUNE TO YOU!\n");
return 0;
}
```

# ğŸ“’ç›¸å…³æ–‡ç« 


